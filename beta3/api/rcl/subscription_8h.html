<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>rcl: include/rcl/subscription.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rcl
   &#160;<span id="projectnumber">master</span>
   </div>
   <div id="projectbrief">C API providing common ROS client library functionality.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_283a3917c54ce6b1b3757c2d5b61678e.html">rcl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">subscription.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;rosidl_generator_c/message_type_support_struct.h&quot;</code><br />
<code>#include &quot;<a class="el" href="macros_8h_source.html">rcl/macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="node_8h_source.html">rcl/node.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="visibility__control_8h_source.html">rcl/visibility_control.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for subscription.h:</div>
<div class="dyncontent">
<div class="center"><img src="subscription_8h__incl.png" border="0" usemap="#include_2rcl_2subscription_8h" alt=""/></div>
<map name="include_2rcl_2subscription_8h" id="include_2rcl_2subscription_8h">
<area shape="rect" id="node3" href="macros_8h.html" title="rcl/macros.h" alt="" coords="24,184,119,211"/>
<area shape="rect" id="node4" href="node_8h.html" title="rcl/node.h" alt="" coords="243,95,321,121"/>
<area shape="rect" id="node10" href="visibility__control_8h.html" title="rcl/visibility_control.h" alt="" coords="462,184,606,211"/>
<area shape="rect" id="node6" href="allocator_8h.html" title="rcl/allocator.h" alt="" coords="232,184,332,211"/>
<area shape="rect" id="node8" href="types_8h.html" title="rcl/types.h" alt="" coords="355,184,438,211"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="subscription_8h__dep__incl.png" border="0" usemap="#include_2rcl_2subscription_8hdep" alt=""/></div>
<map name="include_2rcl_2subscription_8hdep" id="include_2rcl_2subscription_8hdep">
<area shape="rect" id="node2" href="rcl_8h.html" title="include/rcl/rcl.h" alt="" coords="33,155,144,181"/>
<area shape="rect" id="node3" href="wait_8h.html" title="include/rcl/wait.h" alt="" coords="78,80,198,107"/>
</map>
</div>
</div>
<p><a href="subscription_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure which encapsulates a ROS Subscription.  <a href="structrcl__subscription__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrcl__subscription__options__t.html">rcl_subscription_options_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Options available for a rcl subscription.  <a href="structrcl__subscription__options__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a7b56fee3937d13ee262f4fa457ca2aa3"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subscription_8h.html#a7b56fee3937d13ee262f4fa457ca2aa3">rcl_subscription_t</a></td></tr>
<tr class="memdesc:a7b56fee3937d13ee262f4fa457ca2aa3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure which encapsulates a ROS Subscription.  <a href="#a7b56fee3937d13ee262f4fa457ca2aa3">More...</a><br /></td></tr>
<tr class="separator:a7b56fee3937d13ee262f4fa457ca2aa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae29b6840cea76d34231ff95f5471f39"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structrcl__subscription__options__t.html">rcl_subscription_options_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subscription_8h.html#aae29b6840cea76d34231ff95f5471f39">rcl_subscription_options_t</a></td></tr>
<tr class="memdesc:aae29b6840cea76d34231ff95f5471f39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Options available for a rcl subscription.  <a href="#aae29b6840cea76d34231ff95f5471f39">More...</a><br /></td></tr>
<tr class="separator:aae29b6840cea76d34231ff95f5471f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3c840e83cdaac347a8dfa2de7cef6e2f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subscription_8h.html#a3c840e83cdaac347a8dfa2de7cef6e2f">rcl_get_zero_initialized_subscription</a> (void)</td></tr>
<tr class="memdesc:a3c840e83cdaac347a8dfa2de7cef6e2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a <a class="el" href="structrcl__subscription__t.html" title="Structure which encapsulates a ROS Subscription. ">rcl_subscription_t</a> struct with members set to <code>NULL</code>.  <a href="#a3c840e83cdaac347a8dfa2de7cef6e2f">More...</a><br /></td></tr>
<tr class="separator:a3c840e83cdaac347a8dfa2de7cef6e2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b8a58f9ae9fef8adba35b5a45db10a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#af66ec2e20118b821dbf3f9b0067e8796">rcl_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subscription_8h.html#a2b8a58f9ae9fef8adba35b5a45db10a0">rcl_subscription_init</a> (<a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *subscription, const <a class="el" href="structrcl__node__t.html">rcl_node_t</a> *node, const rosidl_message_type_support_t *type_support, const char *topic_name, const <a class="el" href="structrcl__subscription__options__t.html">rcl_subscription_options_t</a> *options)</td></tr>
<tr class="memdesc:a2b8a58f9ae9fef8adba35b5a45db10a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a ROS subscription.  <a href="#a2b8a58f9ae9fef8adba35b5a45db10a0">More...</a><br /></td></tr>
<tr class="separator:a2b8a58f9ae9fef8adba35b5a45db10a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cf9ab2fea92c0df0a26fab96387a53d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#af66ec2e20118b821dbf3f9b0067e8796">rcl_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subscription_8h.html#a8cf9ab2fea92c0df0a26fab96387a53d">rcl_subscription_fini</a> (<a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *subscription, <a class="el" href="structrcl__node__t.html">rcl_node_t</a> *node)</td></tr>
<tr class="memdesc:a8cf9ab2fea92c0df0a26fab96387a53d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize a <a class="el" href="structrcl__subscription__t.html" title="Structure which encapsulates a ROS Subscription. ">rcl_subscription_t</a>.  <a href="#a8cf9ab2fea92c0df0a26fab96387a53d">More...</a><br /></td></tr>
<tr class="separator:a8cf9ab2fea92c0df0a26fab96387a53d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6ac2ea1856dac85ca1efdabf46aa20"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrcl__subscription__options__t.html">rcl_subscription_options_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subscription_8h.html#acd6ac2ea1856dac85ca1efdabf46aa20">rcl_subscription_get_default_options</a> (void)</td></tr>
<tr class="memdesc:acd6ac2ea1856dac85ca1efdabf46aa20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the default subscription options in a <a class="el" href="structrcl__subscription__options__t.html" title="Options available for a rcl subscription. ">rcl_subscription_options_t</a>.  <a href="#acd6ac2ea1856dac85ca1efdabf46aa20">More...</a><br /></td></tr>
<tr class="separator:acd6ac2ea1856dac85ca1efdabf46aa20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae051f29a243196fb16a843a0311b185c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#af66ec2e20118b821dbf3f9b0067e8796">rcl_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subscription_8h.html#ae051f29a243196fb16a843a0311b185c">rcl_take</a> (const <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *subscription, void *ros_message, rmw_message_info_t *message_info)</td></tr>
<tr class="memdesc:ae051f29a243196fb16a843a0311b185c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take a ROS message from a topic using a rcl subscription.  <a href="#ae051f29a243196fb16a843a0311b185c">More...</a><br /></td></tr>
<tr class="separator:ae051f29a243196fb16a843a0311b185c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8388c7aa060bf7d94a324b3166a601d4"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subscription_8h.html#a8388c7aa060bf7d94a324b3166a601d4">rcl_subscription_get_topic_name</a> (const <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *subscription)</td></tr>
<tr class="memdesc:a8388c7aa060bf7d94a324b3166a601d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the topic name for the subscription.  <a href="#a8388c7aa060bf7d94a324b3166a601d4">More...</a><br /></td></tr>
<tr class="separator:a8388c7aa060bf7d94a324b3166a601d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a436dc38b35621ab8722db73f3acfc419"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structrcl__subscription__options__t.html">rcl_subscription_options_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subscription_8h.html#a436dc38b35621ab8722db73f3acfc419">rcl_subscription_get_options</a> (const <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *subscription)</td></tr>
<tr class="memdesc:a436dc38b35621ab8722db73f3acfc419"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the rcl subscription options.  <a href="#a436dc38b35621ab8722db73f3acfc419">More...</a><br /></td></tr>
<tr class="separator:a436dc38b35621ab8722db73f3acfc419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26f9a72d4d8561b81216b697c532782b"><td class="memItemLeft" align="right" valign="top">rmw_subscription_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subscription_8h.html#a26f9a72d4d8561b81216b697c532782b">rcl_subscription_get_rmw_handle</a> (const <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *subscription)</td></tr>
<tr class="memdesc:a26f9a72d4d8561b81216b697c532782b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the rmw subscription handle.  <a href="#a26f9a72d4d8561b81216b697c532782b">More...</a><br /></td></tr>
<tr class="separator:a26f9a72d4d8561b81216b697c532782b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4e105efa2bfe868aa88240e54a29e15"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subscription_8h.html#af4e105efa2bfe868aa88240e54a29e15">rcl_subscription_is_valid</a> (const <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *subscription)</td></tr>
<tr class="memdesc:af4e105efa2bfe868aa88240e54a29e15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check that the subscription is valid.  <a href="#af4e105efa2bfe868aa88240e54a29e15">More...</a><br /></td></tr>
<tr class="separator:af4e105efa2bfe868aa88240e54a29e15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a7b56fee3937d13ee262f4fa457ca2aa3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a>  <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Structure which encapsulates a ROS Subscription. </p>

</div>
</div>
<a class="anchor" id="aae29b6840cea76d34231ff95f5471f39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structrcl__subscription__options__t.html">rcl_subscription_options_t</a>  <a class="el" href="structrcl__subscription__options__t.html">rcl_subscription_options_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Options available for a rcl subscription. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3c840e83cdaac347a8dfa2de7cef6e2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> rcl_get_zero_initialized_subscription </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a <a class="el" href="structrcl__subscription__t.html" title="Structure which encapsulates a ROS Subscription. ">rcl_subscription_t</a> struct with members set to <code>NULL</code>. </p>
<p>Should be called to get a null <a class="el" href="structrcl__subscription__t.html" title="Structure which encapsulates a ROS Subscription. ">rcl_subscription_t</a> before passing to <a class="el" href="subscription_8h.html#a2b8a58f9ae9fef8adba35b5a45db10a0" title="Initialize a ROS subscription. ">rcl_subscription_init()</a>. </p>

</div>
</div>
<a class="anchor" id="a2b8a58f9ae9fef8adba35b5a45db10a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#af66ec2e20118b821dbf3f9b0067e8796">rcl_ret_t</a> rcl_subscription_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structrcl__node__t.html">rcl_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const rosidl_message_type_support_t *&#160;</td>
          <td class="paramname"><em>type_support</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structrcl__subscription__options__t.html">rcl_subscription_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a ROS subscription. </p>
<p>After calling this function on a <a class="el" href="structrcl__subscription__t.html" title="Structure which encapsulates a ROS Subscription. ">rcl_subscription_t</a>, it can be used to take messages of the given type to the given topic using <a class="el" href="subscription_8h.html#ae051f29a243196fb16a843a0311b185c" title="Take a ROS message from a topic using a rcl subscription. ">rcl_take()</a>.</p>
<p>The given <a class="el" href="structrcl__node__t.html" title="Structure which encapsulates a ROS Node. ">rcl_node_t</a> must be valid and the resulting <a class="el" href="structrcl__subscription__t.html" title="Structure which encapsulates a ROS Subscription. ">rcl_subscription_t</a> is only valid as long as the given <a class="el" href="structrcl__node__t.html" title="Structure which encapsulates a ROS Node. ">rcl_node_t</a> remains valid.</p>
<p>The rosidl_message_type_support_t is obtained on a per .msg type basis. When the user defines a ROS message, code is generated which provides the required rosidl_message_type_support_t object. This object can be obtained using a language appropriate mechanism. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000011">Todo:</a></b></dt><dd>TODO(wjwwood) write these instructions once and link to it instead For C a macro can be used (for example <code>std_msgs/String</code>):</dd></dl>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;rosidl_generator_c/message_type_support_struct.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;std_msgs/msg/string.h&gt;</span></div><div class="line"><span class="keyword">const</span> rosidl_message_type_support_t * string_ts =</div><div class="line">  ROSIDL_GET_MSG_TYPE_SUPPORT(std_msgs, msg, String);</div></div><!-- fragment --><p>For C++ a template function is used:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;rosidl_generator_cpp/message_type_support.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;std_msgs/msgs/string.hpp&gt;</span></div><div class="line"><span class="keyword">using</span> rosidl_typesupport_cpp::get_message_type_support_handle;</div><div class="line"><span class="keyword">const</span> rosidl_message_type_support_t * string_ts =</div><div class="line">  get_message_type_support_handle&lt;std_msgs::msg::String&gt;();</div></div><!-- fragment --><p>The rosidl_message_type_support_t object contains message type specific information used to publish messages.</p>
<p>The topic name must be a c string which follows the topic and service name format rules for unexpanded names, also known as non-fully qualified names:</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="expand__topic__name_8h.html#afd76d3899685bd234563afa467b885f2" title="Expand a given topic name into a fully-qualified topic name. ">rcl_expand_topic_name</a></dd></dl>
<p>The options struct allows the user to set the quality of service settings as well as a custom allocator which is used when (de)initializing the subscription to allocate space for incidental things, e.g. the topic name string.</p>
<p>Expected usage (for C messages):</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rcl_8h.html">rcl/rcl.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;rosidl_generator_c/message_type_support_struct.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;std_msgs/msg/string.h&gt;</span></div><div class="line"></div><div class="line"><a class="code" href="structrcl__node__t.html">rcl_node_t</a> node = <a class="code" href="node_8h.html#a81df2a24fd74f87d520fba94297eb583">rcl_get_zero_initialized_node</a>();</div><div class="line"><a class="code" href="structrcl__node__options__t.html">rcl_node_options_t</a> node_ops = <a class="code" href="node_8h.html#a6391b8a89bd72f8e69113a471c005c3c">rcl_node_get_default_options</a>();</div><div class="line"><a class="code" href="types_8h.html#af66ec2e20118b821dbf3f9b0067e8796">rcl_ret_t</a> ret = <a class="code" href="node_8h.html#abbf1d973c1bffeced9659892e14926a2">rcl_node_init</a>(&amp;node, <span class="stringliteral">&quot;node_name&quot;</span>, <span class="stringliteral">&quot;/my_namespace&quot;</span>, &amp;node_ops);</div><div class="line"><span class="comment">// ... error handling</span></div><div class="line"><span class="keyword">const</span> rosidl_message_type_support_t * ts =</div><div class="line">  ROSIDL_GET_MSG_TYPE_SUPPORT(std_msgs, msg, String);</div><div class="line"><a class="code" href="structrcl__subscription__t.html">rcl_subscription_t</a> subscription = <a class="code" href="subscription_8h.html#a3c840e83cdaac347a8dfa2de7cef6e2f">rcl_get_zero_initialized_subscription</a>();</div><div class="line"><a class="code" href="structrcl__subscription__options__t.html">rcl_subscription_options_t</a> subscription_ops = <a class="code" href="subscription_8h.html#acd6ac2ea1856dac85ca1efdabf46aa20">rcl_subscription_get_default_options</a>();</div><div class="line">ret = <a class="code" href="subscription_8h.html#a2b8a58f9ae9fef8adba35b5a45db10a0">rcl_subscription_init</a>(&amp;subscription, &amp;node, ts, <span class="stringliteral">&quot;chatter&quot;</span>, &amp;subscription_ops);</div><div class="line"><span class="comment">// ... error handling, and when finished deinitialization</span></div><div class="line">ret = <a class="code" href="subscription_8h.html#a8cf9ab2fea92c0df0a26fab96387a53d">rcl_subscription_fini</a>(&amp;subscription, &amp;node);</div><div class="line"><span class="comment">// ... error handling for rcl_subscription_fini()</span></div><div class="line">ret = <a class="code" href="node_8h.html#a00d2a1a7959d7b2db49a3653235d414c">rcl_node_fini</a>(&amp;node);</div><div class="line"><span class="comment">// ... error handling for rcl_node_fini()</span></div></div><!-- fragment --><hr/>
 <table class="doxtable">
<tr>
<th>Attribute </th><th>Adherence  </th></tr>
<tr>
<td>Allocates Memory </td><td>Yes </td></tr>
<tr>
<td>Thread-Safe </td><td>No </td></tr>
<tr>
<td>Uses Atomics </td><td>No </td></tr>
<tr>
<td>Lock-Free </td><td>Yes </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">subscription</td><td>preallocated subscription structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node</td><td>valid rcl node handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type_support</td><td>type support object for the topic's type </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_name</td><td>the name of the topic </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">options</td><td>subscription options, including quality of service settings </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>RCL_RET_OK</code> if subscription was initialized successfully, or </dd>
<dd>
<code>RCL_RET_INVALID_ARGUMENT</code> if any arguments are invalid, or </dd>
<dd>
<code>RCL_RET_BAD_ALLOC</code> if allocating memory failed, or </dd>
<dd>
<code>RCL_RET_TOPIC_NAME_INVALID</code> if the given topic name is invalid, or </dd>
<dd>
<code>RCL_RET_ERROR</code> if an unspecified error occurs. </dd></dl>

</div>
</div>
<a class="anchor" id="a8cf9ab2fea92c0df0a26fab96387a53d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#af66ec2e20118b821dbf3f9b0067e8796">rcl_ret_t</a> rcl_subscription_fini </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrcl__node__t.html">rcl_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalize a <a class="el" href="structrcl__subscription__t.html" title="Structure which encapsulates a ROS Subscription. ">rcl_subscription_t</a>. </p>
<p>After calling, the node will no longer be subscribed on this topic (assuming this is the only subscription on this topic in this node).</p>
<p>After calling, calls to rcl_wait and rcl_take will fail when using this subscription. Additioanlly rcl_wait will be interrupted if currently blocking. However, the given node handle is still valid.</p>
<hr/>
 <table class="doxtable">
<tr>
<th>Attribute </th><th>Adherence  </th></tr>
<tr>
<td>Allocates Memory </td><td>Yes </td></tr>
<tr>
<td>Thread-Safe </td><td>No </td></tr>
<tr>
<td>Uses Atomics </td><td>No </td></tr>
<tr>
<td>Lock-Free </td><td>Yes </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">subscription</td><td>handle to the subscription to be deinitialized </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node</td><td>handle to the node used to create the subscription </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>RCL_RET_OK</code> if subscription was deinitialized successfully, or </dd>
<dd>
<code>RCL_RET_INVALID_ARGUMENT</code> if any arguments are invalid, or </dd>
<dd>
<code>RCL_RET_ERROR</code> if an unspecified error occurs. </dd></dl>

</div>
</div>
<a class="anchor" id="acd6ac2ea1856dac85ca1efdabf46aa20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrcl__subscription__options__t.html">rcl_subscription_options_t</a> rcl_subscription_get_default_options </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the default subscription options in a <a class="el" href="structrcl__subscription__options__t.html" title="Options available for a rcl subscription. ">rcl_subscription_options_t</a>. </p>
<p>The defaults are:</p>
<ul>
<li>ignore_local_publications = false</li>
<li>qos = rmw_qos_profile_default</li>
<li>allocator = <a class="el" href="allocator_8h.html#a2546f065f55387ed642d455a55ba7602">rcl_get_default_allocator()</a> </li>
</ul>

</div>
</div>
<a class="anchor" id="ae051f29a243196fb16a843a0311b185c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#af66ec2e20118b821dbf3f9b0067e8796">rcl_ret_t</a> rcl_take </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ros_message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rmw_message_info_t *&#160;</td>
          <td class="paramname"><em>message_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take a ROS message from a topic using a rcl subscription. </p>
<p>It is the job of the caller to ensure that the type of the ros_message argument and the type associate with the subscription, via the type support, match. Passing a different type to rcl_take produces undefined behavior and cannot be checked by this function and therefore no deliberate error will occur.</p>
<p>TODO(wjwwood) blocking of take? TODO(wjwwood) pre-, during-, and post-conditions for message ownership? TODO(wjwwood) is rcl_take thread-safe? TODO(wjwwood) Should there be an rcl_message_info_t?</p>
<p>The ros_message pointer should point to an already allocated ROS message struct of the correct type, into which the taken ROS message will be copied if one is available. If taken is false after calling, then the ROS message will be unmodified.</p>
<p>If allocation is required when taking the message, e.g. if space needs to be allocated for a dynamically sized array in the target message, then the allocator given in the subscription options is used.</p>
<p>The rmw message_info struct contains meta information about this particular message instance, like what the GUID of the publisher which published it originally or whether or not the message received from within the same process. The message_info argument should be an already allocated rmw_message_info_t structure. Passing <code>NULL</code> for message_info will result in the argument being ignored.</p>
<hr/>
 <table class="doxtable">
<tr>
<th>Attribute </th><th>Adherence  </th></tr>
<tr>
<td>Allocates Memory </td><td>Maybe [1] </td></tr>
<tr>
<td>Thread-Safe </td><td>No </td></tr>
<tr>
<td>Uses Atomics </td><td>No </td></tr>
<tr>
<td>Lock-Free </td><td>Yes </td></tr>
</table>
<p><em>[1] only if required when filling the message, avoided for fixed sizes</em></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">subscription</td><td>the handle to the subscription from which to take </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ros_message</td><td>type-erased ptr to a allocated ROS message </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">message_info</td><td>rmw struct which contains meta-data for the message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>RCL_RET_OK</code> if the message was published, or </dd>
<dd>
<code>RCL_RET_INVALID_ARGUMENT</code> if any arguments are invalid, or </dd>
<dd>
<code>RCL_RET_SUBSCRIPTION_INVALID</code> if the subscription is invalid, or </dd>
<dd>
<code>RCL_RET_BAD_ALLOC</code> if allocating memory failed, or </dd>
<dd>
<code>RCL_RET_SUBSCRIPTION_TAKE_FAILED</code> if take failed but no error occurred in the middleware, or </dd>
<dd>
<code>RCL_RET_ERROR</code> if an unspecified error occurs. </dd></dl>

</div>
</div>
<a class="anchor" id="a8388c7aa060bf7d94a324b3166a601d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* rcl_subscription_get_topic_name </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the topic name for the subscription. </p>
<p>This function returns the subscription's internal topic name string. This function can fail, and therefore return <code>NULL</code>, if the:</p><ul>
<li>subscription is <code>NULL</code></li>
<li>subscription is invalid (never called init, called fini, or invalid)</li>
</ul>
<p>The returned string is only valid as long as the subscription is valid. The value of the string may change if the topic name changes, and therefore copying the string is recommended if this is a concern.</p>
<hr/>
 <table class="doxtable">
<tr>
<th>Attribute </th><th>Adherence  </th></tr>
<tr>
<td>Allocates Memory </td><td>No </td></tr>
<tr>
<td>Thread-Safe </td><td>No </td></tr>
<tr>
<td>Uses Atomics </td><td>No </td></tr>
<tr>
<td>Lock-Free </td><td>Yes </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">subscription</td><td>the pointer to the subscription </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>name string if successful, otherwise <code>NULL</code> </dd></dl>

</div>
</div>
<a class="anchor" id="a436dc38b35621ab8722db73f3acfc419"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structrcl__subscription__options__t.html">rcl_subscription_options_t</a>* rcl_subscription_get_options </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the rcl subscription options. </p>
<p>This function returns the subscription's internal options struct. This function can fail, and therefore return <code>NULL</code>, if the:</p><ul>
<li>subscription is <code>NULL</code></li>
<li>subscription is invalid (never called init, called fini, or invalid)</li>
</ul>
<p>The returned struct is only valid as long as the subscription is valid. The values in the struct may change if the subscription's options change, and therefore copying the struct is recommended if this is a concern.</p>
<hr/>
 <table class="doxtable">
<tr>
<th>Attribute </th><th>Adherence  </th></tr>
<tr>
<td>Allocates Memory </td><td>No </td></tr>
<tr>
<td>Thread-Safe </td><td>No </td></tr>
<tr>
<td>Uses Atomics </td><td>No </td></tr>
<tr>
<td>Lock-Free </td><td>Yes </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">subscription</td><td>pointer to the subscription </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>options struct if successful, otherwise <code>NULL</code> </dd></dl>

</div>
</div>
<a class="anchor" id="a26f9a72d4d8561b81216b697c532782b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rmw_subscription_t* rcl_subscription_get_rmw_handle </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the rmw subscription handle. </p>
<p>The handle returned is a pointer to the internally held rmw handle. This function can fail, and therefore return <code>NULL</code>, if the:</p><ul>
<li>subscription is <code>NULL</code></li>
<li>subscription is invalid (never called init, called fini, or invalid)</li>
</ul>
<p>The returned handle is made invalid if the subscription is finalized or if <a class="el" href="rcl_8h.html#a974908de798dda844c7205ca2af11e7f" title="Signal global shutdown of rcl. ">rcl_shutdown()</a> is called. The returned handle is not guaranteed to be valid for the life time of the subscription as it may be finalized and recreated itself. Therefore it is recommended to get the handle from the subscription using this function each time it is needed and avoid use of the handle concurrently with functions that might change it.</p>
<hr/>
 <table class="doxtable">
<tr>
<th>Attribute </th><th>Adherence  </th></tr>
<tr>
<td>Allocates Memory </td><td>No </td></tr>
<tr>
<td>Thread-Safe </td><td>No </td></tr>
<tr>
<td>Uses Atomics </td><td>No </td></tr>
<tr>
<td>Lock-Free </td><td>Yes </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">subscription</td><td>pointer to the rcl subscription </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>rmw subscription handle if successful, otherwise <code>NULL</code> </dd></dl>

</div>
</div>
<a class="anchor" id="af4e105efa2bfe868aa88240e54a29e15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rcl_subscription_is_valid </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrcl__subscription__t.html">rcl_subscription_t</a> *&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check that the subscription is valid. </p>
<p>The bool returned is <code>false</code> if <code>subscription</code> is invalid. The bool returned is <code>true</code> otherwise. In the case where <code>false</code> is to be returned, an error message is set. This function cannot fail.</p>
<hr/>
 <table class="doxtable">
<tr>
<th>Attribute </th><th>Adherence  </th></tr>
<tr>
<td>Allocates Memory </td><td>No </td></tr>
<tr>
<td>Thread-Safe </td><td>No </td></tr>
<tr>
<td>Uses Atomics </td><td>No </td></tr>
<tr>
<td>Lock-Free </td><td>Yes </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">subscription</td><td>pointer to the rcl subscription </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if <code>subscription</code> is valid, otherwise <code>false</code> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
